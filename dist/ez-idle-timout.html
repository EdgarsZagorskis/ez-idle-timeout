<polymer-element name="ez-idle-timeout" attributes="time-show-warning time-idle enabled redirect">
    <template>
        <style>
            #web-component-ez-idle-timeout {
                background-color: #fcf8e3;
                border-color: #fbeed5;
                color: #c09853;
                padding: 10px;
                margin-bottom: 20px;
                position: fixed;
                z-index: 500000000;
                top: 0;
                width: '75%';
            }
        </style>
        <div id="web-component-ez-idle-timeout">
            <button class="close" type="button">Ã—</button>
            <content></content>
        </div>
    </template>
    <script>
        Polymer('ez-idle-timeout', {
            observe: {
                enabled: 'triggerEnable'
            },
            triggerEnable: function (was, is) {
                if (is) {
                    this.tick();
                } else {
                    clearTimeout(this.ticker);
                }
            },
            ready: function () {
                console.log('Legen....');
                var timerStartTime = Number(((new Date()).getTime() / 1000).toFixed());
                var timeWarning = 5 + timerStartTime;
                var timeIdle = 10 + timerStartTime;
                this.tick = function () {
                    this.ticker = setTimeout(function () {
                        var timeNow = Number(((new Date()).getTime() / 1000).toFixed());
                        if (timeNow > timeIdle) {
                            console.log("...dary!!");
                            clearTimeout(this.tick);
                        } else if (timeNow > timeWarning) {
                            console.log('...waaaaaaait for it...');
                        } else {
                            console.log('...waaaaait...');
                        }
                        this.tick();
                    }, 1000);
                };
                this.tick();

                var body = document.getElementsByTagName('body')[0];
                body.addEventListener('mousemove', function () {
                    console.log('a');
                });
                body.addEventListener('keyup', function () {
                    console.log('a');
                });


            }
        });
    </script>
</polymer-element>
